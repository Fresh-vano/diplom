\newsection
\section{Технический проект}
\subsection{Общие сведения о программной системе}

Необходимо спроектировать и разработать веб-платформу для анализа и визуализации статистических данных киберспортивной игры Counter-Strike 2.

Разрабатываемая программная система предназначена для предоставления комплексного инструмента анализа данных, который позволит игрокам, тренерам и аналитикам изучать подробную статистику матчей, улучшая таким образом свои стратегии и игровые навыки. Платформа предоставит интерактивный пользовательский интерфейс для визуализации данных, позволяя пользователям глубоко погружаться в аналитику матчей.

Основной принцип работы системы заключается в обработке .dem файлов матчей CS2 для извлечения детальных игровых метрик и последующем представлении их через графики, диаграммы и интерактивные отчеты. Пользователи смогут просматривать прогнозы на матч и статистику, такую как точность стрельбы, K/D Ratio, использование гранат и прочее, чтобы оценить силу команды и принять обоснованные решения.

Одним из ключевых компонентов программной системы является база данных для хранения извлеченной статистики матчей и команд. Кроме того, будет реализован функционал машинного обучения для предоставления прогнозов исходов матчей, основанных на исторических данных.

Целью разработки данной программной системы является создание эффективного инструмента анализа данных в киберспорте, который поможет повысить конкурентоспособность игроков и команд на международной арене, способствуя развитию киберспорта как спортивной дисциплины.


\subsection{Проектирование архитектуры программной системы}
\subsubsection{Выбор архитектурного стиля и паттернов проектирования}
Для разработки веб-платформы анализа и визуализации статистических данных CS2 был выбран микросервисный подход. Такой стиль архитектуры подразумевает разбиение функционала системы на отдельные сервисы, каждый из которых отвечает за свою узкоспециализированную задачу. Это обеспечивает гибкость в развертывании и масштабировании, упрощает поддержку и обновление компонентов системы без необходимости внесения изменений во все сервисы сразу, а только в конкретный.

В качестве центрального входа в систему будет использоваться \textbf{API Gateway Pattern}, что позволит унифицировать обработку входящих запросов, распределение нагрузки, обеспечение безопасности и предоставление единой точки входа для клиентских приложений.

Для взаимодействия с клиентами будет использоваться \textbf{REST API}, что гарантирует легкость интеграции и стандартизированное общение между сервисами. REST API идеально подходит для микросервисной архитектуры за счет своей бесшовной и эффективной коммуникации. А так же возможностью предоставления внешнего взаимодействия с сервером.

Все данные, передаваемые между клиентом и сервером, будут защищены с использованием \textbf{HTTPS}, обеспечивая конфиденциальность, целостность передачи данных и защиту от муждуузловых атак.

Для запросов к данным со стороны клиента будет применяться протокол \textbf{OData}, который позволяет стандартизировать выборку, фильтрацию и пагинацию данных через HTTP запросы, обеспечивая гибкость и удобство в интеграции с различными клиентскими приложениями.

Для повышения производительности и снижения нагрузки на базу данных будет использоваться подход \textbf{Cache-Aside} в сочетании с \textbf{Redis}. Это позволит хранить часто запрашиваемые данные в быстром кеше, что существенно ускорит время их доставки конечному пользователю.

Для асинхронного обмена сообщениями между различными микросервисами в системе будет применяться \textbf{RabbitMQ}. Этот брокер сообщений позволит надежно обрабатывать задачи в фоновом режиме, улучшая производительность и масштабируемость системы, обеспечивая отказоустойчивость и балансировку нагрузки при высоких объемах обмена данными.

Данная архитектура обеспечивает всей системе необходимую гибкость для развития и масштабирования, а также повышает надежность и отказоустойчивость приложения при больших нагрузках.

Архитектура всей системы представлена на рисунке \ref{fig:-architecture}.
\begin{figure}
	\centering
	\includegraphics[width=0.7\linewidth]{"images/Архитектура"}
	\caption{Архитектура программной системы}
	\label{fig:-architecture}
\end{figure}

\subsubsection{Структура базы данных}

Основной базой данных для хранения данных в системе будет выступать \textbf{PostgreSQL}. Эта СУБД была выбрана за её надежность, масштабируемость и поддержку сложных запросов, что является критически важным для аналитических запросов, связанных с большими объемами данных.

\textbf{Redis} будет использоваться как вспомогательная система для кеширования часто запрашиваемых данных. Это позволит значительно ускорить время отклика системы, уменьшить нагрузку на основную базу данных и предоставить пользователям актуальную информацию с минимальной задержкой.

\subsubsection{Описание микросервисов}

Веб-платформа будет включать в себя следующие микросервисы:

\begin{itemize}
	\item \textbf{API Gateway:	} Является точкой входа в систему, маршрутизирует запросы к соответствующим сервисам. Связан со всеми сервисами.
	\item \textbf{Сервис поиска информации о турнирах:} Отвечает за предоставление актуальных данных о киберспортивных турнирах. Сервис взаимодействует с базой данных и API сторонних платформ для обновления и поддержания в актуальном состоянии информации о предстоящих и прошедших турнирах.
	\item \textbf{Сервис анализа .dem файла:} Загружает и анализирует загруженные .dem файлы, извлекает из матча основные статистические данные для добавления их в базу данных и обработки другими сервисами.
	\item \textbf{Сервис предоставления данных:} Управляет предоставлением данных для разных разделов. Сервис взаимодействует с базой данных для получения, обработки и отправки информационных и статистических данных в нужном формате.
	\item \textbf{Сервис поиска:} Реализует функциональность поиска по всем сегментам данных платформы. Интегрирован с другими сервисами и предоставляет пользователю удобный поиск по игрокам, командам и турнирам.
	\item \textbf{Сервис прогнозирования:} Использует машинное обучение и алгоритмы прогнозирования для предсказания исходов матчей. Анализирует исторические данные и текущие тенденции для генерации прогнозов.
	\item \textbf{Брокер сообщений (RabbitMQ):} Обеспечивает надежную передачу сообщений между сервисами, поддерживает распределенные транзакции и асинхронное взаимодействие в микросервисной архитектуре.
	\item \textbf{Prometheus:} Используется для мониторинга работы сервисов, сбора метрик и уведомления о проблемах, позволяя оперативно реагировать на сбои и изменения в работе системы.
\end{itemize}

\subsubsection{Планирование докеризации и оркестрации сервисов}

Для достижения высокой отказоустойчивости, удобства в развертывании и эффективного масштабирования, развертывание каждого микросервиса веб-платформы будет выполнено в контейнере Docker. Каждый контейнер в себе будет включать требуемое ядро системы, используемые библиотеки и настройки окружения для запуска данного микросервиса. Это позволит обеспечить изоляцию зависимостей между частями платформы и согласованность окружений независимо от инфраструктуры развертывания.

Оркестрация контейнеров будет производиться с помощью Kubernetes, что гарантирует автоматизацию развертывания, масштабирования и управления приложениями контейнеров. Kubernetes обеспечивает балансировку нагрузки, самовосстановление сервисов при их ошибках, автоматическое распределение ресурсов и управление конфигурацией.

Вся инфраструктура веб-платформы будет развернута в облаке Yandex Cloud, что обеспечит высокую доступность сервисов и возможности простой интеграции с другими облачными сервисами.

\subsection{Обоснование выбора технологий проектирования и аппаратных средств}
\subsubsection{Выбор используемых технологий и языков программирования}

\paragraph{C\#}

Выбор C\# для разработки микросервисов обосновывается его производительностью, масштабируемостью и кросс-платформенностью, что обеспечивает быструю разработку надежной и масштабируемой системы.

\paragraph{Python}

Python выбран для сервиса прогнозирования из-за его превосходной поддержки библиотек машинного обучения и аналитики данных, таких как TensorFlow или scikit-learn, что делает его идеальным выбором для разработки алгоритмов прогнозирования.

\paragraph{Go}

Go используется для сервиса анализа .dem файлов, так как он предлагает высокую производительность и эффективность в обработке и анализе низкоуровневых данных, таких как  бинарные файлы .dem записей матчей, благодаря своим встроенным средствам для параллельной обработки. Так же его преимуществом выступает наличие специализированных бесплатных библиотек с открытым исходным кодом для работы с .dem файлами.

\paragraph{React}

React применяется для разработки пользовательского интерфейса, предоставляя динамичный и отзывчивый веб-интерфейс, который может эффективно обновляться в реальном времени.

\paragraph{Entity Framework Core}

Entity Framework Core является ORM (Object-Relational Mapping) для
.NET Core. Он позволяет работать с базами данных, используя объектноориентированный подход. Entity Framework Core позволяет работать со всеми популярными СУБД, в том числе с PostgreSQL, которая была выбрана для разработки. EF Core предоставляет удобные и мощные инструменты для разработки приложений, использующих CRUD подход, упрощая работу с данными через высокоуровневый API.

\paragraph{PostgreSQL}

PostgreSQL выбрана в качестве основной базы данных за её мощные возможности и надежность в работе с большими объемами данных, а также поддержку сложных запросов и транзакций. PostgreSQL предлагает удобные функции для разработчиков, такие как JSON/JSONB поддержка, хранение процедур и триггеры, что делает её идеальной для комплексных приложений,
требующих масштабируемости и гибкости.

\paragraph{Redis}

Redis — это база данных, размещаемая в памяти, которая используется, в основном, в роли кеша, находящегося перед другой, «настоящей» базой данных, вроде MySQL или PostgreSQL. Кеш, основанный на Redis, помогает улучшить производительность приложений. Он эффективно использует скорость работы с данными, характерную для памяти, и смягчает нагрузку центральной базы данных приложения, связанную с обработкой следующих данных:
\begin{itemize}
	\item Данные, которые редко меняются, к которым часто обращается приложение.
	\item Данные, не относящиеся к критически важным, которые часто меняются.
\end{itemize}

Примеры таких данных могут включать в себя сессионные кеши или кеши данных, а так же содержимое панелей управления — вроде списков лидеров и отчётов, включающих в себя данные, агрегированные из разных источников.

\subsubsection{Выбор аппаратного обеспечения}

Разработка веб-платформы для анализа и визуализации статистических данных игры Counter-Strike 2 требует продуманного подхода к выбору аппаратного обеспечения. Основные критерии выбора – масштабируемость, надежность, и производительность системы. В качестве основы для реализации инфраструктуры выбраны современные технологии контейнеризации, оркестрации, управления очередями сообщений и мониторинга: Docker, Kubernetes, RabbitMQ, и Prometheus.

Важным аспектом является решение о запуске всей инфраструктуры в облачной среде, что обеспечивает высокую гибкость, масштабируемость и доступность ресурсов. Облачные сервера Yandex Cloud, на которых будет развернута система, будут работать под управлением операционной системы Linux, что гарантирует стабильность работы и широкие возможности для настройки системы.

\paragraph{Docker}

Docker предоставляет легковесную и удобную платформу для создания, развертывания и управления контейнерами. Контейнеризация упрощает процесс разработки, тестирования и развертывания приложений, позволяя запускать приложения и их зависимости в изолированных средах. В контексте выбора аппаратного обеспечения это означает возможность оптимизации использования ресурсов и увеличение эффективности за счет развертывания на облачных серверах с поддержкой Docker.

\paragraph{Kubernetes}

Kubernetes является мощной системой для автоматизации развертывания, масштабирования и управления контейнеризированными приложениями. В архитектуре веб-платформы Kubernetes обеспечивает высокую доступность, автоматическое масштабирование и балансировку нагрузки между контейнерами. Для аппаратного обеспечения это подразумевает необходимость в выделенном или облачном сервере с достаточным количеством процессорного времени и оперативной памяти для поддержания кластера Kubernetes.

\paragraph{RabbitMQ}

RabbitMQ, система управления очередями сообщений, играет ключевую роль в обеспечении асинхронной обработки данных и интеграции различных частей системы. Эффективное использование RabbitMQ позволяет распределить нагрузку, улучшить производительность приложения и обеспечить надежную обработку сообщений. Аппаратное обеспечение должно соответствовать требованиям по пропускной способности и скорости обработки сообщений, что особенно важно при больших объемах данных. Сервер на котором будет находится данный сервис должен быть максимально отказоустойчивым, для исключения лавинного выхода из строя микросервисов.

\paragraph{Prometheus}

Prometheus — система мониторинга и оповещения, которая позволяет собирать и анализировать метрики в реальном времени. Использование Prometheus обеспечивает возможность наблюдения за производительностью системы, оптимизации ресурсов и быстрого реагирования на возникающие проблемы. Аппаратное обеспечение должно обладать достаточным объемом хранилища для сбора и хранения данных метрик, а также процессорной мощностью для их обработки.

\subsection{Проектирование пользовательского интерфейса программной системы}
\subsubsection{Макеты пользовательского интерфейса}

На основании требований к пользовательскому интерфейсу, представленных в пункте 2.3 технического задания, был разработан графический интерфейс мобильного приложения, используя React с использованием библиотеки Material UI. Разработанный интерфейс ориентирован на обеспечение легкости в использовании и удобного визуального представления статистических данных.

На рисунке \ref{fig:-teamPage} представлен макет страницы команды.
\begin{figure}
	\centering
	\includegraphics[width=0.8\linewidth]{"images/Страница команды"}
	\caption{Макет страницы команды}
	\label{fig:-teamPage}
\end{figure}

Макет содержит следующие элементы:
\begin{itemize}
	\item Название команды.
	\item Логотип команды.
	\item Статистика команды по картам.
	\item Список матчей команды.
	\item Состав команды.
\end{itemize}

На рисунке \ref{fig:-playerPage} представлен макет страницы игрока.
\begin{figure}
	\centering
	\includegraphics[width=0.8\linewidth]{"images/Страница игрока"}
	\caption{Макет страницы игрока}
	\label{fig:-playerPage}
\end{figure}

Макет содержит следующие элементы:
\begin{itemize}
	\item Никнейм игрока.
	\item Фото игрока.
	\item Статистика игрока по картам.
	\item Список матчей данного игрока.
	\item Основную информацию о игроке.
	\item Прочую статистику игрока.
\end{itemize}

На рисунке \ref{fig:-matchPage} представлен макет страницы матча.
\begin{figure}
	\centering
	\includegraphics[width=0.8\linewidth]{"images/Страница матча"}
	\caption{Макет страницы матча}
	\label{fig:-matchPage}
\end{figure}

Макет содержит следующие элементы:
\begin{itemize}
	\item Турнир и стадию для данного матча.
	\item Счет и названия команд матча.
	\item Основную информацию матча.
	\item Статистику игроков в данном матче по командам.
\end{itemize}

На рисунке \ref{fig:-tournamentPage} представлен макет страницы турнира.
\begin{figure}
	\centering
	\includegraphics[width=0.8\linewidth]{"images/Страница турнира"}
	\caption{Макет страницы турнира}
	\label{fig:-tournamentPage}
\end{figure}

Макет содержит следующие элементы:
\begin{itemize}
	\item Название турнира, логотип его дата.
	\item Список участвующих команд.
	\item Основную информацию турнира.
	\item Список матчей данного турнира.
\end{itemize}
